<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æ™ºèƒ½èŠå¤©æ©Ÿå™¨äºº</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">æ™ºèƒ½èŠå¤©æ©Ÿå™¨äºº</div>
        <div class="chat-box" id="chatBox">
            </div>
        <div class="input-area">
            <input type="file" id="fileInput" accept="image/jpeg, image/png" style="display: none;">
            <button class="icon-btn" onclick="document.getElementById('fileInput').click()">ğŸ“</button>
            <input type="text" id="userInput" placeholder="è¼¸å…¥è¨Šæ¯..." onkeypress="handleKeyPress(event)">
            <button class="send-btn" onclick="sendMessage()">â¬†</button>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const fileInput = document.getElementById('fileInput');

        // é€å‡ºæ–‡å­—è¨Šæ¯
        function sendMessage() {
            const text = userInput.value.trim();
            if (text === "") return;

            appendMessage(text, 'user');
            userInput.value = ""; // æ¸…ç©ºè¼¸å…¥æ¡†

            // æ¨¡æ“¬æ©Ÿå™¨äººå›è¦†
            setTimeout(() => {
                appendMessage("å·²æ”¶åˆ°è¨Šæ¯ï¼", 'bot');
            }, 500);
        }

        // è™•ç† Enter éµ
        function handleKeyPress(e) {
            if (e.key === 'Enter') sendMessage();
        }

        // è™•ç†åœ–ç‰‡ä¸Šå‚³
        fileInput.addEventListener('change', function() {
            const file = this.files[0];
            if (!file) return;

            // æª¢æŸ¥å¤§å° (5MB = 5 * 1024 * 1024 bytes)
            if (file.size > 5242880) {
                alert("æª”æ¡ˆå¤§å°ä¸èƒ½è¶…é 5MB");
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                appendImage(e.target.result, 'user');
                setTimeout(() => {
                    appendMessage("å·²æ”¶åˆ°åœ–ç‰‡ï¼", 'bot');
                }, 500);
            };
            reader.readAsDataURL(file);
        });

        function appendMessage(text, sender) {
            const div = document.createElement('div');
            div.className = `message ${sender}-message`;
            div.innerText = text;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function appendImage(src, sender) {
            const div = document.createElement('div');
            div.className = `message ${sender}-message img-msg`;
            const img = document.createElement('img');
            img.src = src;
            div.appendChild(img);
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>